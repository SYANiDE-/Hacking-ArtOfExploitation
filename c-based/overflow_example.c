#include <stdio.h>
#include <stdlib.h>
#include <string.h>
// gcc overflow_example.c -o overflow_example.elf -fno-stack-protector

void usage(int checkthis, char** vector){
	if (checkthis < 2){
		printf("USAGE: %s [string]\n", vector[0]);
		exit(-1);
	}
}

int main(int argc, char* argv[]){
	usage(argc, argv);
	int val = 5;
	char buf1[8], buf2[8];
	strcpy(buf1, "one");
	strcpy(buf2, "two");
	printf("[before] buf2@%p contains '%s'\n", buf2,buf2);
	printf("[before] buf1@%p contains '%s'\n", buf1,buf1);
	printf("[before] val@%p contains %d (0x%08x)\n",&val,val,val);
	printf("[strcpy] %d bytes -> buf2\n",strlen(argv[1]));
	strcpy(buf2,argv[1]);
	printf("[after] buf2@%p contains '%s'\n", buf2,buf2);
	printf("[after] buf1@%p contains '%s'\n", buf1,buf1);
	printf("[after] val@%p contains %d (0x%08x)\n",&val,val,val);
}

