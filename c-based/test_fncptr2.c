#include <stdio.h>
#include <stdlib.h>
void worker(void (*f)(int,int,int), int, int, int);
void division(int, int, int);
void multiplication(int, int, int);

/* passing function pointers
 * master function calls passed function pointed-to
 */

int main(){
   int a=20, b=12, c=5;
   printf("a,%12p,%4d\nb,%12p,%4d\nc,%12p,%4d\n",&a,a,&b,b,&c,c);
   void (*fncptr)(int, int, int);
   printf("void (*fncptr)(int, int, int); initialized\n");
   printf("&fncptr = %p, fncptr points to %p\n", &fncptr, fncptr);
   fncptr = division;
   printf("fncptr = division;\n");
   printf("&fncptr = %p, fncptr points to %p\n", &fncptr, fncptr);
   printf("[!] Calling worker(fncptr, a, b, c);\n");
   worker(fncptr, a, b, c);
   fncptr = multiplication;
   printf("fncptr = multiplication;\n");
   printf("&fncptr = %p, fncptr points to %p\n", &fncptr, fncptr);
   printf("[!] Calling worker(fncptr, a, b, c);\n");
   worker(fncptr, a, b, c);
   return(0);
}

void worker(void (*f)(int,int,int), int a, int b, int c){
   /* Note worker takes a function pointer,
    * and three ints
    */
   f(a, b, c);
}

void division(int x, int y, int z){
   float III = (x / y);
   III /= z;
   printf("[!] divided (a/b)/c = %f\n", III);
}

void multiplication(int x, int y, int z){
   float III = (x * y) * z;
   printf("[!] multiplied (a*b)*c = %f\n", III);
}

